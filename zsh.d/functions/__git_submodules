#autoload

__git_submodules () {
  local expl
  declare -a submodules

  [[ -r .gitmodules ]] || return 1
  submodules=(${${(M)${(f)"$(< .gitmodules)"}:#[ 	]#path[ 	]#=*}##*=[ 	]#})

  _wanted submodules expl submodule compadd $* - $submodules
}
