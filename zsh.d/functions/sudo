#autoload sudo

local args

if [[ $# -eq 2 ]] && [[ "$1" = '-u' ]]; then
  args=($*)
  set --
fi

if [[ $# -eq 0 ]]; then
  set XDG_CONFIG_HOME="$XDG_CONFIG_HOME" ZDOTDIR="${ZDOTDIR:-$HOME}" VIMINIT="source $ZDOTDIR/.vim/sudoed.vim" "$SHELL" -l
fi

command sudo -H $args SSH_AUTH_SOCK="$SSH_AUTH_SOCK" TMUX="$TMUX" "$@"
