#compdef lyst

local context state line
typeset -A opt_args
local components

_arguments \
  '1:Catalyst dir:->catdir' \
  '2:Subdirectory:->subdir' \
  && return 0

case "$state" in
  (catdir)
    _values 'Catalyst dir' \
      base \
      templates \
      static \
      js \
      css \
      lib \
      project \
      view \
      controller \
      model \
      schema \
      db \
    ;;
  (subdir)
    local target="$(__lyst_dir $line[1])"
    _path_files -/ -W "${target:-/fake/directory}"
    ;;
esac
